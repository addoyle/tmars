$title-font: 'Prototype', sans-serif;
$hand-height: 33vh;

.drawer {
  position: absolute;
  bottom: 0;
  left: 0;
  height: $hand-height;
  border-top: 4px solid #444;
  background: rgba(187, 187, 187, .5);
  transition: transform .5s ease;
  cursor: default;
  z-index: 2;
  user-select: none;
  width: 100vw;

  &.empty {
    height: 20vh;
  }

  &.collapse {
    transform: translateY(100%);
    z-index: 3;

    .button-box, .on-deck {
      pointer-events: none;
      opacity: 0;
    }
  }

  .button-box {
    position: absolute;
    top: -67px;
    transform: translate(-50%, -100%);
    left: 50vw;
    padding: 16px;
    border-radius: 16px;
    border: 3px solid #444;
    background: rgba(187, 187, 187, .5);
    z-index: 2;
    opacity: 1;
    transition: opacity .5s ease;
    box-shadow: 8px 8px 8px rgba(0,0,0,.2);
    overflow: hidden;
    text-align: center;

    button {
      padding: 8px;

      .x {
        position: relative;
        text-shadow: 0 0 3px rgba(255,255,255,.7);
        font-size: 1.2em;
        margin-right: -10px;
        margin-left: -3px;
        z-index: 2;
      }
    }

    .error {
      text-align: center;
      font-family: sans-serif;
      background-color: rgba(128,0,0,.75);
      color: #ddd;
      margin-bottom: 16px;
      padding: 4px;
      border-radius: 8px;
      height: 24px;
      margin-top: -40px;
      opacity: 0;
      transition: margin-top .5s ease, opacity .5s ease;

      &.show {
        margin-top: 0;
        opacity: 1;
      }
    }
  }

  .on-deck {
    display: flex;
    flex-direction: column-reverse;
    filter: drop-shadow(0 0 4px rgba(255,255,255,.4));
    position: absolute;
    top: -4px;
    left: 56px;
    transform: translateY(-100%);
    opacity: 1;
    transition: opacity .5s ease;

    > div {
      margin-bottom: 8px;

      .param.card {
        box-shadow: 0 0 2px rgba(255,255,255,.4);
        margin-right: -.5em;
        font-size: 1.5em;
      }
    }
  }

  .cards {
    margin: 0;
    text-align: center;
    padding: 24px 24px 48px;
    max-height: calc(#{$hand-height} - 3px);
    overflow-y: auto;

    li {
      display: inline-block;
      margin: 2px;
      list-style-type: none;
      position: relative;
      transition: background-color .5s ease;
      opacity: 1;
      width: 150px;
      height: 210px;
      background: transparent;
      border-radius: 5px;

      &.landscape {
        width: 210px;
        height: 150px;
      }

      &.selected {
        background: rgba(0,0,0,.25);

        .card-preview {
          cursor: default;
          opacity: 0;
        }
      }

      .card-preview {
        position: static;
        pointer-events: auto;
        user-select: none;
        cursor: pointer;
        margin: 0;
        transition: opacity .5s ease;

        > .card {
          font-size: 150px;
          transition: box-shadow .15s ease, transform .3s ease;

          &:hover {
            box-shadow: 0 0 0 4px #444, 0 0 10px 4px rgba(0,0,0,.5);
            transform: scale(1.2);
            z-index: 2;

            & ~ .card-resources {
              z-index: 2;
              transform: translate(-50%, -50%) scale(1.2);
            }
          }
        }
      }

      &.disabled {
        filter: grayscale(75%);
        opacity: .5;

        .card-preview {
          cursor: not-allowed;

          > .card:hover {
            box-shadow: none;
            transform: none;
          }
        }
      }
    }
  }
}
